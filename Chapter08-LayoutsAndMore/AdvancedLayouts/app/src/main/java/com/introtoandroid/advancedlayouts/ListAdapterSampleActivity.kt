package com.introtoandroid.advancedlayoutsimport android.graphics.Colorimport android.os.Bundleimport android.provider.ContactsContractimport android.support.v4.app.NavUtilsimport android.support.v4.app.TaskStackBuilderimport android.support.v4.content.CursorLoaderimport android.support.v4.widget.SimpleCursorAdapterimport android.support.v7.app.AppCompatActivityimport android.support.v7.widget.Toolbarimport android.view.MenuItemimport android.view.Viewimport android.widget.AdapterViewimport android.widget.AdapterView.OnItemClickListenerimport android.widget.ListAdapterimport android.widget.ListViewimport android.widget.Toastclass ListAdapterSampleActivity : AppCompatActivity() {    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        val loader = CursorLoader(            this, ContactsContract.CommonDataKinds.Phone.CONTENT_URI,            null, null, null, null        )        val contacts = loader.loadInBackground()        val adapter: ListAdapter = SimpleCursorAdapter(            this, R.layout.scratch_layout,            contacts, arrayOf<String>(                ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,                ContactsContract.CommonDataKinds.Phone.NUMBER            ), intArrayOf(                R.id.scratch_text1,                R.id.scratch_text2            ), 0        )        setContentView(R.layout.scratch_list)        val toolbar = findViewById<View?>(R.id.toolbar) as Toolbar        toolbar.setTitleTextColor(Color.WHITE)        setSupportActionBar(toolbar)        checkNotNull(getSupportActionBar())        getSupportActionBar()!!.setDisplayHomeAsUpEnabled(true)        val av = findViewById<View?>(R.id.scratch_adapter_view) as ListView        av.setAdapter(adapter)        av.setOnItemClickListener(object : OnItemClickListener {            override fun onItemClick(                parent: AdapterView<*>?,                view: View?, position: Int, id: Long            ) {                Toast.makeText(                    this@ListAdapterSampleActivity,                    "Clicked _id=" + id, Toast.LENGTH_SHORT                ).show()            }        })    }    override fun onOptionsItemSelected(item: MenuItem): Boolean {        when (item.getItemId()) {            android.R.id.home -> {                val upIntent = NavUtils.getParentActivityIntent(this)                if (NavUtils.shouldUpRecreateTask(this, upIntent!!)) {                    TaskStackBuilder.create(this)                        .addNextIntentWithParentStack(upIntent)                        .startActivities()                } else {                    NavUtils.navigateUpTo(this, upIntent)                }                return true            }        }        return super.onOptionsItemSelected(item)    }}